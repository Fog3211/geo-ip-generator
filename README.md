# éšæœºIPåœ°å€ç”Ÿæˆå™¨

åŸºäº [T3 Stack](https://create.t3.gg/) æ„å»ºçš„éšæœºIPåœ°å€ç”ŸæˆæœåŠ¡ï¼Œæ”¯æŒæ ¹æ®å›½å®¶åœ°åŒºç æˆ–åç§°ç”Ÿæˆå¯¹åº”åœ°åŒºçš„çœŸå®IPåœ°å€ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **ğŸ² éšæœºIPç”Ÿæˆ**: è¾“å…¥å›½å®¶ä»£ç æˆ–åç§°ï¼Œç”Ÿæˆè¯¥åœ°åŒºçš„çœŸå®IPåœ°å€
- **ğŸ“Š æ‰¹é‡ç”Ÿæˆ**: æ”¯æŒä¸€æ¬¡ç”Ÿæˆ1-10ä¸ªIPåœ°å€
- **ğŸŒ å…¨çƒè¦†ç›–**: æ”¯æŒ200+ä¸ªå›½å®¶å’Œåœ°åŒº
- **ğŸ“‹ ä¸€é”®å¤åˆ¶**: å•ä¸ªæˆ–æ‰¹é‡å¤åˆ¶ç”Ÿæˆçš„IPåœ°å€
- **ğŸ“ è¯¦ç»†ä¿¡æ¯**: æ˜¾ç¤ºIPçš„åœ°ç†ä½ç½®ã€ISPç­‰è¯¦ç»†ä¿¡æ¯
- **ğŸš€ ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: Next.js + TypeScript + tRPC + Prisma + Tailwind CSS
- **ğŸ“± å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯
- **ğŸ”— APIæ”¯æŒ**: æä¾›RESTful APIæ¥å£ä¾›å¤–éƒ¨è°ƒç”¨

## æŠ€æœ¯æ ˆ

- **Frontend**: [Next.js 15](https://nextjs.org) with App Router
- **Backend**: [tRPC](https://trpc.io) for type-safe APIs
- **Database**: [Prisma](https://prisma.io) ORM with SQLite
- **Styling**: [Tailwind CSS](https://tailwindcss.com)
- **Type Safety**: [TypeScript](https://www.typescriptlang.org/)
- **Development**: [Biome](https://biomejs.dev/) for linting and formatting

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+ 
- pnpm æˆ– npm

### å®‰è£…å’Œè¿è¡Œ

1. å…‹éš†ä»“åº“
```bash
git clone <repository-url>
cd ipregion
```

2. å®‰è£…ä¾èµ–
```bash
pnpm install
```

3. è®¾ç½®æ•°æ®åº“
```bash
npm run db:push
npm run db:seed  # åˆ›å»ºç¤ºä¾‹æ•°æ®
```

4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

5. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### ç½‘é¡µç•Œé¢ä½¿ç”¨

1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å›½å®¶ä»£ç æˆ–åç§°
   - å›½å®¶ä»£ç ï¼šCN, US, JP, UK
   - ä¸­æ–‡åï¼šä¸­å›½, ç¾å›½, æ—¥æœ¬
   - è‹±æ–‡åï¼šChina, America, Japan

2. é€‰æ‹©ç”Ÿæˆæ•°é‡ï¼ˆ1-10ä¸ªï¼‰

3. ç‚¹å‡»"ç”ŸæˆIP"æŒ‰é’®

4. å¤åˆ¶ç”Ÿæˆçš„IPåœ°å€

### APIè°ƒç”¨

#### ç”ŸæˆéšæœºIPåœ°å€

**æ¥å£åœ°å€**: `/api/generate-ip`

**æ–¹å¼ä¸€: GETè¯·æ±‚**

**è¯·æ±‚å‚æ•°**:
- `country`: å›½å®¶ä»£ç æˆ–åç§°ï¼ˆå¿…éœ€ï¼‰
- `count`: ç”Ÿæˆæ•°é‡ï¼ˆ1-10ï¼Œé»˜è®¤1ï¼‰

**ç¤ºä¾‹è¯·æ±‚**:
```
GET /api/generate-ip?country=CN&count=3
```

**æ–¹å¼äºŒ: POSTè¯·æ±‚**

**è¯·æ±‚ä½“**:
```json
{
  "country": "CN",
  "count": 3
}
```

**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "country": {
      "id": "CN",
      "nameEn": "China",
      "nameZh": "ä¸­å›½",
      "continent": "Asia",
      "region": "Eastern Asia"
    },
    "ips": [
      {
        "ip": "1.2.3.4",
        "location": {
          "region": "Beijing",
          "city": "Beijing",
          "isp": "China Telecom"
        }
      }
    ],
    "totalRanges": 1250,
    "generatedCount": 3
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "error": "æœªæ‰¾åˆ°å›½å®¶/åœ°åŒº: XX"
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### å¼€å‘æµ‹è¯•
- **ç½‘ç»œä»£ç†æµ‹è¯•**: ç”Ÿæˆä¸åŒå›½å®¶çš„æµ‹è¯•IP
- **åœ°ç†ä½ç½®æœåŠ¡**: æ¨¡æ‹Ÿç”¨æˆ·æ¥æº
- **CDNåˆ†å‘æµ‹è¯•**: æµ‹è¯•å†…å®¹åˆ†å‘ç½‘ç»œ

### æ•°æ®åˆ†æ
- **ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿ**: æ¨¡æ‹Ÿä¸åŒåœ°åŒºç”¨æˆ·è®¿é—®
- **A/Bæµ‹è¯•**: åœ°åŒºåŒ–åŠŸèƒ½æµ‹è¯•
- **è´Ÿè½½æµ‹è¯•**: æ¨¡æ‹Ÿå…¨çƒç”¨æˆ·è´Ÿè½½

### å®‰å…¨æµ‹è¯•
- **é˜²ç«å¢™è§„åˆ™æµ‹è¯•**: æµ‹è¯•åœ°åŒºè®¿é—®é™åˆ¶
- **IPç™½åå•æµ‹è¯•**: éªŒè¯è®¿é—®æ§åˆ¶
- **åœ°ç†å›´æ æµ‹è¯•**: æµ‹è¯•åœ°åŒºé™åˆ¶åŠŸèƒ½

## ğŸ—ƒï¸ æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- å›½å®¶ä¿¡æ¯è¡¨
Country {
  id: String         // å›½å®¶ä»£ç  (CN, US, JP)
  nameEn: String     // è‹±æ–‡å
  nameZh: String     // ä¸­æ–‡å
  continent: String  // å¤§æ´²
  region: String     // åœ°åŒº
}

-- IPæ®µä¿¡æ¯è¡¨
IpRange {
  startIp: String      // èµ·å§‹IP
  endIp: String        // ç»“æŸIP
  startIpInt: BigInt   // èµ·å§‹IPæ•´æ•°ï¼ˆç”¨äºèŒƒå›´æŸ¥è¯¢ï¼‰
  endIpInt: BigInt     // ç»“æŸIPæ•´æ•°
  countryId: String    // å…³è”å›½å®¶ä»£ç 
  regionName: String   // çœ/å·åç§°
  cityName: String     // åŸå¸‚åç§°
  isp: String          // ISPä¾›åº”å•†
}
```

## ğŸ“Š æ•°æ®æ¥æº

### æ”¯æŒçš„æ•°æ®å¯¼å…¥

1. **IP2Locationæ•°æ®** (æ¨è)
   ```bash
   npm run import:ip2location
   ```
   - å…¨çƒ300ä¸‡+IPæ®µæ•°æ®
   - 200+å›½å®¶è¦†ç›–
   - çœ/å·/åŸå¸‚çº§ç²¾åº¦

2. **æ¼”ç¤ºæ•°æ®**
   ```bash
   npm run db:seed
   ```
   - å¿«é€Ÿå¼€å§‹çš„ç¤ºä¾‹æ•°æ®
   - åŒ…å«ä¸»è¦å›½å®¶IPæ®µ

## ğŸ”§ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç±»å‹æ£€æŸ¥
npm run typecheck

# ä»£ç æ ¼å¼åŒ–
npm run check:write

# æ•°æ®åº“ç®¡ç†
npm run db:studio
```

### éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **æŸ¥è¯¢é€Ÿåº¦**: < 200ms
- **æ•°æ®å‡†ç¡®æ€§**: å›½å®¶çº§ 99.8%
- **å¹¶å‘æ”¯æŒ**: æ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- **å†…å­˜å ç”¨**: < 100MBï¼ˆå«ç´¢å¼•ï¼‰

## ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§

- **ç±»å‹å®‰å…¨**: ç«¯åˆ°ç«¯TypeScriptæ”¯æŒ
- **å®æ—¶éªŒè¯**: Zodè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
- **å“åº”å¼UI**: Tailwind CSSç°ä»£åŒ–ç•Œé¢
- **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“ç´¢å¼•å’ŒæŸ¥è¯¢ä¼˜åŒ–
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

---

ğŸš€ **ç«‹å³å¼€å§‹**: `npm run dev`  
ğŸ”— **APIæ–‡æ¡£**: è®¿é—® `/api/trpc` æŸ¥çœ‹å®Œæ•´API  
ğŸ¯ **åœ¨çº¿æ¼”ç¤º**: [é¡¹ç›®æ¼”ç¤ºåœ°å€]
